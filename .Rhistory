library(haven)
lab <- read_dta("Ch2_lab_survey_data.dta")
#Create dummy variable for Arlington county, selecting corresponding precinct codes with OR operators
lab$Arlington <- (
lab$precinct == "AR49" | lab$precinct == "AR22" | lab$precinct == "AR2" |
lab$precinct == "AR18" | lab$precinct == "41" | lab$precinct == "16" |
lab$precinct == "4" | lab$precinct == "17" | (lab$precinct == "2" &
lab$state == 4& !is.na(lab$state))|
lab$precinct == "31" | lab$precinct == "48")
#Count observations from each county, in this case TRUE corresponds to Arlington
table(lab$Arlington)
#Create dummy variable for Prince William county, selecting corresponding precinct codes with OR operators
lab$PrinceWilliam1 <- (
lab$precinct == "PW 101" | lab$precinct == "PW 104" |  lab$precinct == "PW 401" | lab$precinct == "PW101" |
lab$precinct == "PW104" | lab$precinct == "PW402" | lab$precinct == "PW406"  | lab$precinct == "401" | lab$precinct == "402" |
(lab$precinct == "104" & lab$state == 4)	)
#Count observations from each county, in this case TRUE corresponds to Prince William
table(lab$PrinceWilliam1)
#Create dummy variables for each state
lab$DC <- (lab$state == 1)
lab$Maryland <- (lab$state == 2)
lab$Ohio <- (lab$state == 3)
lab$Virginia <- (lab$state == 4)
#Tabulate observations for each state
table(lab$state)
#Since the survey was taken in 2016, subtract 2016 - year born to obtain age
#Create new age column
lab$age <- 2016 - lab$year_born
#The first summary of the age column shows there is a max age of 152 and 482 NA rows
summary(lab$age)
#Subset the lab dataframe and exclude values where age is above 100
newdata <- subset(lab, age < 100)
#The summary of the newdata age column shows a new maximum of 95, which is possible
summary(newdata$age)
#Create male and female variables
lab$male <- (lab$gender == 1)
lab$female <- (lab$gender == 2)
table(lab$male)
table(lab$gender)
#Summarize Clinton feeling thermometer, see there is a max of 200
summary(lab$therm_clinton)
#Turn values over 100 into NA and summarize again
lab$therm_clinton[lab$therm_clinton > 100] <- NA
summary(lab$therm_clinton)
#Summarize Trump feeling thermometer
summary(lab$therm_trump)
#Below shows 7 values for education question
lab1 <- read_dta("Ch2_lab_survey_data.dta")
table(lab1$education)
#Below we adjust education to exclude the Other response in answer 4, and re-assign the other responses accordingly
#Additionally, the Other response only had 11 values
lab1$education[lab1$education == 4] <- NA
lab1$education[lab1$education == 5] <- 4
lab1$education[lab1$education == 6] <- 5
lab1$education[lab1$education == 7] <- 6
#Generate a new summary table
table(lab1$education)
#A quick histogram to show the distribution of education
#Below (as well as the table above) shows a low number of responses from 1 - Some high school, which could indicate a bias in sampling, or simply reflect the education of the sample.
hist(lab1$education)
